---
import Layout from '../../layouts/Layout.astro'
import { Image } from 'astro:assets'

import { getCollection, render } from 'astro:content'
import SectionContainer from '../../components/sections/SectionContainer.astro'

export async function getStaticPaths() {
	const posts = await getCollection('posts')

	return posts.map((post) => ({
		params: { slug: post.slug },
		props: { post }
	}))
}

const { post } = Astro.props
const { data } = post
const { title, img } = data
const { Content } = await render(post)
---

<Layout title="Blog Junior Calva">
	<main class="bg-gradient-to-b from-secondary via-violet-950/50 to-secondary py-1">
		<SectionContainer margin>
			<h1 class="text-3xl font-bold text-white">{post.data.title}</h1>
			<Image class={'w-72'} src={img} alt={title} width={800} height={600} />
			<div class="mt-4 prose prose-stone prose-invert">
				<Content />
			</div>
		</SectionContainer>
	</main>
</Layout>
